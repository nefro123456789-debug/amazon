{% extends "base.html" %}

{% block content %}
<div class="orders-container" style="max-width: 1000px; margin: 20px auto; padding: 20px;">
    <h1>Your Orders</h1>

    {% if orders %}
    {% for order in orders %}
    <div class="order-card" style="border: 1px solid #ddd; margin-bottom: 20px; border-radius: 5px;">
        <div class="order-header"
            style="background-color: #f0f2f2; padding: 15px; display: flex; justify-content: space-between; border-bottom: 1px solid #ddd;">
            <div>
                <span style="display: block; font-size: 12px; color: #565959;">ORDER PLACED</span>
                <span>{{ order.created_at.strftime('%B %d, %Y') }}</span>
            </div>
            <div>
                <span style="display: block; font-size: 12px; color: #565959;">TOTAL</span>
                <span>${{ "%.2f"|format(order.total_amount) }}</span>
            </div>
            <div>
                <span style="display: block; font-size: 12px; color: #565959;">STATUS</span>
                <strong>{{ order.status }}</strong>
            </div>
            <div>
                <span style="display: block; font-size: 12px; color: #565959;">ORDER # {{ order.id }}</span>
            </div>
        </div>
        <div class="order-items" style="padding: 20px;">
            {% for item in order.items %}
            <div style="display: flex; gap: 20px; margin-bottom: 15px;">
                <img src="{{ item.product.image_url }}" alt="{{ item.product.title }}"
                    style="width: 80px; height: 80px; object-fit: contain;">
                <div>
                    <h4 style="margin: 0;"><a href="{{ url_for('product_detail', id=item.product.id) }}"
                            style="color: #007185; text-decoration: none;">{{ item.product.title }}</a></h4>
                    <p style="margin: 5px 0;">Quantity: {{ item.quantity }}</p>
                    <p style="margin: 5px 0; color: #B12704;">${{ "%.2f"|format(item.price_at_purchase) }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
    {% else %}
    <p>You have no orders yet.</p>
    {% endif %}
</div>
{% endblock %}